{"version":3,"sources":["webpack:///app.bundle.54ea437cef97cfd19928.js","webpack:///./scripts/app.js","webpack:///./scripts/document-ready.js","webpack:///./scripts/layer-animations.js","webpack:///./scripts/layer-drag-and-drop.js","webpack:///./scripts/layer-utils.js"],"names":["webpackJsonp","./scripts/app.js","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_app","_documentReady","_documentReady2","_layerAnimations","_layerAnimations2","_layerDragAndDrop","_layerDragAndDrop2","./scripts/document-ready.js","Object","defineProperty","value","documentReady","_len","arguments","length","callbacks","Array","_key","document","readyState","forEach","cb","addEventListener","./scripts/layer-animations.js","$","_layerUtils","$layers","$layerContainers","staggeredBackwards","$backwardsLayers","previousLayer","first","prev","Deferred","deferred","insertBefore","setTimeout","resolve","promise","moveForward","$layer","off","parent","children","last","animate","height","duration","start","this","removeClass","addClass","complete","nextAll","blLength","get","reverse","each","index","layer","then","$bLayers","$container","frontHeight","calculateLayerHeight","containerHeight","calculateContainerHeight","on","moveForwardListener","event","currentTarget","hasClass","container","$selected","find","css","call","./scripts/layer-drag-and-drop.js","utils","newObj","key","prototype","hasOwnProperty","$layerDragIcons","$draggedLayer","undefined","safeTransition","mouseLeave","mouseEnter","buttons","finish","enteringElement","relatedTarget","isOutOfLayers","siblings","target","delegateTarget","isNextSibling","insertAfter","isPreviousSibling","nextElementSibling","dropLayer","$newFrontLayer","body","pickLabel","preventDefault","pickLayer","stopPropagation","window","./scripts/layer-utils.js","element","classList","contains","from","some","elementClass","match","$element","sibling","is","prevAll","contentHeight","toArray","reduce","total","curr","offsetHeight","querySelector","./styles/app.scss"],"mappings":"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","file":"app.bundle.54ea437cef97cfd19928.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"./scripts/app.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _app = __webpack_require__(\"./styles/app.scss\");\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _documentReady = __webpack_require__(\"./scripts/document-ready.js\");\n\nvar _documentReady2 = _interopRequireDefault(_documentReady);\n\nvar _layerAnimations = __webpack_require__(\"./scripts/layer-animations.js\");\n\nvar _layerAnimations2 = _interopRequireDefault(_layerAnimations);\n\nvar _layerDragAndDrop = __webpack_require__(\"./scripts/layer-drag-and-drop.js\");\n\nvar _layerDragAndDrop2 = _interopRequireDefault(_layerDragAndDrop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _documentReady2.default)(_layerAnimations2.default, _layerDragAndDrop2.default);\n\n// https://webpack.github.io/docs/hot-module-replacement.html\nif (false) {\n  module.hot.accept();\n}\n\n/***/ }),\n\n/***/ \"./scripts/document-ready.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar documentReady = function documentReady() {\n  for (var _len = arguments.length, callbacks = Array(_len), _key = 0; _key < _len; _key++) {\n    callbacks[_key] = arguments[_key];\n  }\n\n  if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n    callbacks.forEach(function (cb) {\n      return cb();\n    });\n  } else {\n    callbacks.forEach(function (cb) {\n      return document.addEventListener('DOMContentLoaded', cb);\n    });\n  }\n};\n\nexports.default = documentReady;\n\n/***/ }),\n\n/***/ \"./scripts/layer-animations.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _layerUtils = __webpack_require__(\"./scripts/layer-utils.js\");\n\nvar $layers = $('.c-layer');\nvar $layerContainers = $('.c-layers');\n\nvar staggeredBackwards = function staggeredBackwards($backwardsLayers) {\n\n  var previousLayer = $backwardsLayers.first().prev();\n  return previousLayer.length ? $.Deferred(function (deferred) {\n    $backwardsLayers.insertBefore(previousLayer);\n    setTimeout(function () {\n      deferred.resolve(staggeredBackwards($backwardsLayers));\n    }, 200);\n  }) : $backwardsLayers.promise();\n};\n\nvar moveForward = function moveForward($layer) {\n  $layers.off('click');\n  $layer.parent().children().last().animate({\n    height: '480px'\n  }, {\n    duration: 300,\n    start: function start() {\n      $(this).removeClass('c-layer--selected');\n      $(this).addClass('c-layer--visited');\n    },\n    complete: function complete() {\n\n      var $backwardsLayers = $layer.nextAll();\n      var blLength = $backwardsLayers.length;\n\n      $.Deferred(function (deferred) {\n        $($backwardsLayers.get().reverse()).each(function (index, layer) {\n          setTimeout(function () {\n            $(layer).addClass('c-layer--hide');\n            if (index === blLength - 1) {\n              setTimeout(function () {\n                deferred.resolve($backwardsLayers);\n              }, 150);\n            }\n          }, 150 * index);\n        });\n      }).then(staggeredBackwards).then(function ($bLayers) {\n        $($bLayers.get().reverse()).each(function (index, layer) {\n          setTimeout(function () {\n            $(layer).removeClass('c-layer--hide');\n          }, 200 * index);\n        });\n\n        var $container = $layer.parent();\n        var frontHeight = (0, _layerUtils.calculateLayerHeight)($layer);\n        var containerHeight = (0, _layerUtils.calculateContainerHeight)($layer);\n\n        $layer.addClass('c-layer--selected');\n\n        $container.animate({\n          height: containerHeight + 'px'\n        }, {\n          duration: 500\n        });\n        $layer.animate({\n          height: frontHeight + 'px'\n        }, {\n          duration: 500,\n          start: function start() {\n            $(this).addClass('c-layer--selected');\n          },\n          complete: function complete() {\n            $layers.on('click', moveForwardListener);\n          }\n        });\n      });\n    }\n  });\n};\n\nvar moveForwardListener = function moveForwardListener(event) {\n  var $layer = $(event.currentTarget);\n  if (!$layer.hasClass('c-layer--selected')) {\n    moveForward($layer);\n  }\n};\n\nexports.default = function () {\n  $layers.on('click', moveForwardListener);\n  $layerContainers.each(function (index, container) {\n    var $selected = $(container).find('.c-layer--selected');\n    $selected.css('height', (0, _layerUtils.calculateLayerHeight)($selected));\n    $(container).css('height', (0, _layerUtils.calculateContainerHeight)($selected));\n  });\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./scripts/layer-drag-and-drop.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _layerUtils = __webpack_require__(\"./scripts/layer-utils.js\");\n\nvar utils = _interopRequireWildcard(_layerUtils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar $layers = $('.c-layer');\nvar $layerDragIcons = $('.c-layer__icon-drag');\n\nvar $draggedLayer = undefined;\n\nvar safeTransition = function safeTransition($layer) {\n  $layer.off('mouseleave');\n  $layer.off('mouseenter');\n  setTimeout(function () {\n    $layer.on('mouseleave', mouseLeave);\n    $layer.on('mouseenter', mouseEnter);\n  }, 100);\n};\n\nvar mouseLeave = function mouseLeave(event) {\n  if ($draggedLayer && event.buttons === 1) {\n    $draggedLayer.finish();\n    var enteringElement = event.relatedTarget;\n\n    if (utils.isOutOfLayers(enteringElement)) {\n      $draggedLayer.insertBefore($draggedLayer.siblings().first());\n      $draggedLayer.addClass('c-layer--drop');\n    }\n  }\n};\n\nvar mouseEnter = function mouseEnter(event) {\n  if ($draggedLayer && event.buttons === 1) {\n    var target = event.delegateTarget;\n    if (target !== $draggedLayer && utils.isNextSibling($draggedLayer, target)) {\n      safeTransition($(target));\n      $draggedLayer.insertAfter(target);\n      $draggedLayer.addClass('c-layer--drop');\n    }\n    if (target !== $draggedLayer && utils.isPreviousSibling($draggedLayer.prev(), target)) {\n      safeTransition($(target));\n      $draggedLayer.insertBefore(target.nextElementSibling);\n      $draggedLayer.addClass('c-layer--drop');\n    }\n  }\n};\n\nvar dropLayer = function dropLayer() {\n  if ($draggedLayer) {\n    var $container = $draggedLayer.parent();\n    var $newFrontLayer = $container.children().last();\n    var frontHeight = utils.calculateLayerHeight($newFrontLayer);\n    var containerHeight = utils.calculateContainerHeight($newFrontLayer);\n\n    $(document.body).removeClass('h-layer--body-grabbing');\n    $draggedLayer.removeClass('c-layer--dragging');\n    $newFrontLayer.addClass('c-layer--selected');\n\n    $container.animate({\n      height: containerHeight + 'px'\n    }, {\n      duration: 500\n    });\n    $newFrontLayer.animate({\n      height: frontHeight + 'px'\n    }, {\n      duration: 500,\n      start: function start() {\n        $(this).addClass('c-layer--selected');\n      }\n    });\n\n    $draggedLayer.removeClass('c-layer--drop');\n    $draggedLayer = undefined;\n  }\n};\n\nvar pickLabel = function pickLabel(event) {\n  event.preventDefault();\n  $draggedLayer = $(event.target).parent().parent();\n  $($draggedLayer).addClass('c-layer--dragging');\n};\n\nvar pickLayer = function pickLayer(event) {\n  $(document.body).addClass('h-layer--body-grabbing');\n  event.preventDefault();\n  event.stopPropagation();\n  $(event.delegateTarget).parent().children().last().animate({\n    height: '480px'\n  }, {\n    duration: 300,\n    start: function start() {\n      $(this).removeClass('c-layer--selected');\n      $(this).addClass('c-layer--visited');\n    }\n  });\n};\n\nexports.default = function () {\n  $layerDragIcons.on('dragstart', pickLabel);\n\n  $layers.on('dragstart', '.c-layer__icon-drag', pickLayer);\n  $layers.on('mouseleave', mouseLeave);\n  $layers.on('mouseenter', mouseEnter);\n\n  $(window).on('mouseup', dropLayer);\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"../node_modules/jquery/dist/jquery.js\")))\n\n/***/ }),\n\n/***/ \"./scripts/layer-utils.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar isOutOfLayers = exports.isOutOfLayers = function isOutOfLayers(element) {\n  return element.classList.contains('c-layers') || !Array.from(element.classList).some(function (elementClass) {\n    return elementClass.match(/^c-layer/);\n  });\n};\n\nvar isNextSibling = exports.isNextSibling = function isNextSibling($element, sibling) {\n  return $element.nextAll().is(sibling);\n};\n\nvar isPreviousSibling = exports.isPreviousSibling = function isPreviousSibling($element, sibling) {\n  return $element.prevAll().is(sibling);\n};\n\nvar calculateLayerHeight = exports.calculateLayerHeight = function calculateLayerHeight($layer) {\n  var contentHeight = $layer.children().toArray().reduce(function (total, curr) {\n    return curr.offsetHeight + total;\n  }, 2);\n  return contentHeight < 480 ? 480 : contentHeight;\n};\n\nvar calculateContainerHeight = exports.calculateContainerHeight = function calculateContainerHeight($layer) {\n  return $layer.siblings().toArray().reduce(function (total, curr) {\n    return curr.querySelector('.c-layer__header').offsetHeight + total;\n  }, calculateLayerHeight($layer));\n};\n\n/***/ }),\n\n/***/ \"./styles/app.scss\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"./scripts/app.js\"]);\n\n\n// WEBPACK FOOTER //\n// app.bundle.54ea437cef97cfd19928.js","import styles from '../styles/app.scss'\nimport documentReady from './document-ready'\nimport layerAnimations from './layer-animations'\nimport layerDragAndDrop from './layer-drag-and-drop'\n\ndocumentReady(layerAnimations, layerDragAndDrop)\n\n// https://webpack.github.io/docs/hot-module-replacement.html\nif (module.hot) {\n  module.hot.accept()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/app.js","const documentReady = (...callbacks) => {\n  if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n    callbacks.forEach(cb => cb())\n  }\n  else {\n    callbacks.forEach(cb => document.addEventListener('DOMContentLoaded', cb))\n  }\n}\n\nexport default documentReady;\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/document-ready.js","import { calculateLayerHeight, calculateContainerHeight } from './layer-utils'\n\nconst $layers = $('.c-layer')\nconst $layerContainers = $('.c-layers')\n\nconst staggeredBackwards = $backwardsLayers => {\n\n  const previousLayer = $backwardsLayers.first().prev()\n  return previousLayer.length\n    ? $.Deferred(deferred => {\n      $backwardsLayers.insertBefore(previousLayer)\n      setTimeout(() => {\n        deferred.resolve(staggeredBackwards($backwardsLayers))\n      }, 200)\n    })\n    : $backwardsLayers.promise()\n}\n\nconst moveForward = $layer => {\n  $layers.off('click')\n  $layer.parent().children().last().animate({\n    height: '480px',\n  }, {\n    duration: 300,\n    start: function () {\n      $(this).removeClass('c-layer--selected')\n      $(this).addClass('c-layer--visited')\n    },\n    complete: function () {\n\n      const $backwardsLayers = $layer.nextAll()\n      const blLength = $backwardsLayers.length\n\n      $.Deferred(deferred => {\n        $($backwardsLayers.get().reverse()).each((index, layer) => {\n          setTimeout(() => {\n            $(layer).addClass('c-layer--hide')\n            if (index === blLength - 1) {\n              setTimeout(() => {\n                deferred.resolve($backwardsLayers)\n              }, 150)\n            }\n          }, 150 * index)\n        })\n      })\n        .then(staggeredBackwards)\n        .then($bLayers => {\n          $($bLayers.get().reverse()).each((index, layer) => {\n            setTimeout(() => {\n              $(layer).removeClass('c-layer--hide')\n            }, 200 * index)\n          })\n\n          const $container = $layer.parent()\n          const frontHeight = calculateLayerHeight($layer)\n          const containerHeight = calculateContainerHeight($layer)\n\n          $layer.addClass('c-layer--selected')\n\n          $container.animate({\n            height: containerHeight + 'px',\n          }, {\n            duration: 500,\n          })\n          $layer.animate({\n            height: frontHeight + 'px',\n          }, {\n            duration: 500,\n            start: function () {\n              $(this).addClass('c-layer--selected')\n            },\n            complete: () => {\n              $layers.on('click', moveForwardListener)\n            }\n          })\n\n        })\n\n    }\n  })\n}\n\nconst moveForwardListener = event => {\n  const $layer = $(event.currentTarget)\n  if (!$layer.hasClass('c-layer--selected')) {\n    moveForward($layer)\n  }\n}\n\nexport default () => {\n  $layers.on('click', moveForwardListener)\n  $layerContainers.each((index, container) => {\n    const $selected = $(container).find('.c-layer--selected')\n    $selected.css('height', calculateLayerHeight($selected))\n    $(container).css('height', calculateContainerHeight($selected))\n  })\n}\n\n\n// WEBPACK FOOTER //\n// ./scripts/layer-animations.js","import * as utils from './layer-utils'\n\nconst $layers = $('.c-layer')\nconst $layerDragIcons = $('.c-layer__icon-drag')\n\nlet $draggedLayer = undefined\n\nconst safeTransition = ($layer) => {\n  $layer.off('mouseleave')\n  $layer.off('mouseenter')\n  setTimeout(() => {\n    $layer.on('mouseleave', mouseLeave)\n    $layer.on('mouseenter', mouseEnter)\n  }, 100)\n}\n\nconst mouseLeave = event => {\n  if ($draggedLayer && event.buttons === 1) {\n    $draggedLayer.finish()\n    const enteringElement = event.relatedTarget\n\n    if (utils.isOutOfLayers(enteringElement)) {\n      $draggedLayer.insertBefore($draggedLayer.siblings().first())\n      $draggedLayer.addClass('c-layer--drop')\n    }\n  }\n}\n\nconst mouseEnter = event => {\n  if ($draggedLayer && event.buttons === 1) {\n    const target = event.delegateTarget\n    if (target !== $draggedLayer && utils.isNextSibling($draggedLayer, target)) {\n      safeTransition($(target))\n      $draggedLayer.insertAfter(target)\n      $draggedLayer.addClass('c-layer--drop')\n    }\n    if (target !== $draggedLayer && utils.isPreviousSibling($draggedLayer.prev(), target)) {\n      safeTransition($(target))\n      $draggedLayer.insertBefore(target.nextElementSibling)\n      $draggedLayer.addClass('c-layer--drop')\n    }\n  }\n}\n\nconst dropLayer = () => {\n  if ($draggedLayer) {\n    const $container = $draggedLayer.parent()\n    const $newFrontLayer = $container.children().last()\n    const frontHeight = utils.calculateLayerHeight($newFrontLayer)\n    const containerHeight = utils.calculateContainerHeight($newFrontLayer)\n\n    $(document.body).removeClass('h-layer--body-grabbing')\n    $draggedLayer.removeClass('c-layer--dragging')\n    $newFrontLayer.addClass('c-layer--selected')\n\n    $container.animate({\n      height: containerHeight + 'px',\n    }, {\n      duration: 500,\n    })\n    $newFrontLayer.animate({\n      height: frontHeight + 'px',\n    }, {\n      duration: 500,\n      start: function () {\n        $(this).addClass('c-layer--selected')\n      }\n    })\n\n    $draggedLayer.removeClass('c-layer--drop')\n    $draggedLayer = undefined\n  }\n}\n\nconst pickLabel = event => {\n  event.preventDefault()\n  $draggedLayer = $(event.target).parent().parent()\n  $($draggedLayer).addClass('c-layer--dragging')\n}\n\nconst pickLayer = event => {\n  $(document.body).addClass('h-layer--body-grabbing')\n  event.preventDefault()\n  event.stopPropagation()\n  $(event.delegateTarget).parent().children().last().animate({\n    height: '480px',\n  }, {\n    duration: 300,\n    start: function () {\n      $(this).removeClass('c-layer--selected')\n      $(this).addClass('c-layer--visited')\n    }\n  })\n}\n\nexport default () => {\n  $layerDragIcons.on('dragstart', pickLabel)\n\n  $layers.on('dragstart', '.c-layer__icon-drag', pickLayer)\n  $layers.on('mouseleave', mouseLeave)\n  $layers.on('mouseenter', mouseEnter)\n\n  $(window).on('mouseup', dropLayer)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./scripts/layer-drag-and-drop.js","export const isOutOfLayers = (element) => element.classList.contains('c-layers')\n|| !Array.from(element.classList).some(elementClass => elementClass.match(/^c-layer/))\n\nexport const isNextSibling = ($element, sibling) => $element.nextAll().is(sibling)\n\nexport const isPreviousSibling = ($element, sibling) => $element.prevAll().is(sibling)\n\nexport const calculateLayerHeight = $layer => {\n  const contentHeight = $layer.children().toArray()\n    .reduce((total, curr) => curr.offsetHeight + total, 2)\n  return contentHeight < 480 ? 480 : contentHeight\n}\n\nexport const calculateContainerHeight = $layer => $layer.siblings().toArray()\n  .reduce((total, curr) => curr.querySelector('.c-layer__header').offsetHeight + total\n    , calculateLayerHeight($layer))\n\n\n// WEBPACK FOOTER //\n// ./scripts/layer-utils.js"],"sourceRoot":""}